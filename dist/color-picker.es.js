/*! Color-Picker 0.13.1 MIT | https://github.com/yairEO/color-picker */
var t=t=>(new DOMParser).parseFromString(t.trim(),"text/html").body.firstElementChild,e={color:"white",onInput:t=>t,onChange:t=>t,buttons:{undo:{icon:"&curvearrowleft;",title:"Undo"},format:{icon:"&leftrightarrows;",title:"Switch Color Format"},add:{icon:"+",title:"Add to Swatches"}}};const s=t=>t.match(/\((.*)\)/)[1].split(",").map(Number),i=t=>Object.assign([0,0,0,1],t.match(/\((.*)\)/)[1].split(",").map(((t,e)=>3!=e||t.includes("%")?parseFloat(t):100*parseFloat(t)))),a=t=>`hsla(${t.h}, ${t.s}%, ${t.l}%, ${t.a}%)`,o=t=>t.toFixed(1).replace(".0",""),n=t=>{const[e,s,i,a]=(t=>t.match(/\w\w/g))(t),[o,n,h]=[e,s,i].map((t=>parseInt(t,16)));return`rgba(${o},${n},${h},${a?(parseInt(a,16)/255).toFixed(2):1})`},h=t=>{var e,s=document.createElement("canvas").getContext("2d");return s.fillStyle=t,"#"==(e=s.fillStyle)[0]?e:r(e)},r=t=>{const[e,i,a,o]=s(t),n="#"+[e,i,a].map((t=>t.toString(16).padStart(2,"0"))).join("");return 3==t.length?n:n+Math.round(255*o).toString(16).padStart(2,"0")},l=t=>{let[e,i,a,n]=s(t);e/=255,i/=255,a/=255;let h=Math.max(e,i,a),r=Math.min(e,i,a),l=h-r,c=0,u=0,d=((h+r)/2).toPrecision(5);return l&&(u=d>.5?l/(2-h-r):l/(h+r),c=h==e?(i-a)/l+(i<a?6:0):c=h==i?(a-e)/l+2:(e-i)/l+4,c/=6),{h:o(360*c),s:o(100*u),l:o(100*d),a:o(100*n)}},c=(t,e)=>(e=(e+"").toLowerCase(),t=h(t),"hex"==e?t:e.startsWith("hsl")?a(l(n(t))):e.startsWith("rgb")?n(t):t);function u({name:t,min:e=0,max:s=100,value:i}){return`<div class="range color-picker__${t}" title="${t}" style="--min:${e}; --max:${s};">\n            <input type="range" name="${t}" value="${i}" min="${e}" max="${s}">\n            <output></output>\n            <div class='range__progress'></div>\n          </div>`}function d(t){const{buttons:{undo:e,format:s}}=this.settings;return`\n    <div class='color-picker__value cp-checkboard'>\n      <input name='value' inputmode='decimal' placeholder='CSS Color' value='${h(a(t))}'>\n      <button title='${e.title}' name="undo">${e.icon}</button>\n      <button title='${s.title}' name='format'>${s.icon}</button>\n      <div></div>\n    </div>\n  `}function p(t,e){const{buttons:{add:s}}=this.settings;return`\n    <div class='color-picker__swatches' style='--initial-len:${e.length}'>\n      <button name='addSwatch' title='${s.title}'>${s.icon}</button>\n      ${t.map((t=>S(t,e.includes(t)))).join("")}\n    </div>\n  `}function S(t,e){return`<div class="cp-checkboard color-picker__swatch" title="${t}" style="--c:${t}">${e?"":'<button name="removeSwatch">&times;</button>'}</div>`}var m=Object.freeze({__proto__:null,scope:function(){const{h:t,s:e,l:s,a:i}=this.color;return`\n    <div class='${`color-picker ${this.settings.className||""}`.trim()}'>\n      ${u({name:"hue",value:t,max:"360"})}\n      ${u({name:"saturation",value:e})}\n      ${u({name:"lightness",value:s})}\n      ${u({name:"alpha",value:i})}\n      <output></output>\n      ${d.call(this,this.color)}\n      ${this.swatches?p.call(this,this.swatches,this.initialSwatches):""}\n    </div>\n  `},slider:u,swatch:S,swatches:p,value:d});function v(){this.syncGlobalSwatchesWithLocal()}function g(t){t.preventDefault();const{value:e,max:s}=t.target,i=-1*Math.sign(t.deltaY);e&&s&&(t.target.value=Math.min(Math.max(+e+i,0),+s),f.call(this,t))}function w(t){"Escape"==t.key&&this.settings.onClickOutside(t)}function b(t){this.DOM.scope.contains(t.target)||this.settings.onClickOutside(t)}function f(t){const{name:e,value:s,type:i}=t.target;"range"==i&&this.setColor({...this.color,[e[0]]:+s})}function C(t){const{type:e}=t.target;"range"!=e&&"text"!=e||(this.history.last=this.color)}function $(t){this.setColor(this.getHSLA(t.target.value)),this.DOM.value.blur()}function O(t){const{name:e,parentNode:s,classList:i,title:a}=t.target;"format"==e?this.switchFormat():"undo"==e?this.history.undo():"addSwatch"==e?this.addSwatch():"removeSwatch"==e?this.removeSwatch(s,s.title):i.contains("color-picker__swatch")&&a&&(this.setColor(this.getHSLA(a)),this.history.last=this.color)}var _=Object.freeze({__proto__:null,bindEvents:function(){[["scope","input",f],["scope","change",C],["scope","click",O],["scope","wheel",g],["value","change",$]].forEach((([t,e,s])=>this.DOM[t].addEventListener(e,s.bind(this),{pasive:!1}))),window.addEventListener("storage",v.bind(this)),this.settings.onClickOutside&&(document.body.addEventListener("click",b.bind(this)),window.addEventListener("keydown",w.bind(this)))}});function y(){const t=()=>this.settings.onChange(this.CSSColor),e=this.setColor.bind(this);return{_value:[this.color],get pop(){return this._value.pop()},get previous(){return this._value[this._value.length-2]},set last(e){this._value.push(e),t()},undo(){if(this._value.length>1){this.pop;let s=this._value[this._value.length-1];return e(s),t(),s}}}}const M="@yaireo/color-picker/swatches";var D=Object.freeze({__proto__:null,addSwatch:function(e=this.CSSColor){if(((t,e)=>t.some((t=>h(t)==h(e))))(this.swatches,e))return;const s=t(this.templates.swatch(e));s.classList.add("cp_remove"),this.DOM.swatches.prepend(s),setTimeout((()=>s.classList.remove("cp_remove")),0),this.swatches.unshift(e),this.sharedSwatches.unshift(e),this.getSetGlobalSwatches(this.sharedSwatches)},getSetGlobalSwatches:function(t){const e=this.settings.swatchesLocalStorage,s="string"==typeof e?e:"";return e&&t&&(localStorage.setItem(M+s,t.join(";")),dispatchEvent(new Event("storage"))),localStorage[M+s]?.split(";").filter(String)||[]},removeSwatch:function(t,e){t.classList.add("cp_remove"),setTimeout((()=>t.remove()),200);const s=t=>t!=e;this.swatches=this.swatches.filter(s),this.sharedSwatches=this.sharedSwatches.filter(s),this.getSetGlobalSwatches(this.sharedSwatches)},syncGlobalSwatchesWithLocal:function(){this.sharedSwatches=this.getSetGlobalSwatches(),this.swatches=this.sharedSwatches.concat(this.initialSwatches),this.DOM.swatches&&setTimeout((()=>{const e=t(this.templates.swatches.call(this,this.swatches,this.initialSwatches));this.DOM.swatches.replaceWith(e),this.DOM.swatches=e}),500)}});function x(t){this.settings=Object.assign({},e,t);const{color:s,defaultFormat:i,swatches:a}=this.settings;this.DOM={},this.sharedSwatches=this.getSetGlobalSwatches(),this.initialSwatches=a||[],this.swatches=a&&this.sharedSwatches.concat(this.initialSwatches),this.color=c(s,i),this.history=y.call(this),this.init()}x.prototype={templates:m,...D,..._,getColorFormat:t=>"#"==t[0]?"hex":t.indexOf("hsl")?t.indexOf("rgb")?"":"rgba":"hsla",getHSLA(t){let e;if(t)return t+""=="[object Object]"&&Object.keys(t).join("").startsWith("hsl")?t:(this.colorFormat=this.getColorFormat(t),t.indexOf("hsla")?(t=h(t),t=n(t),e=l(t)):(e=i(t),e={h:e[0],s:e[1],l:e[2],a:e[3]}),e)},switchFormat(){switch(this.colorFormat){case"":case"hex":this.colorFormat="rgba";break;case"rgba":this.colorFormat="hsla";break;case"hsla":this.colorFormat="hex"}this.setCSSColor(),this.DOM.value.value=this.CSSColor},updateRangeSlider(t,e){const s=this.DOM.scope.querySelector(`input[name="${t}"]`);s&&(s.value=e,s.parentNode.style.setProperty("--value",e),s.parentNode.style.setProperty("--text-value",JSON.stringify(""+Math.round(e))),this.updateCSSVar(t,e))},setCSSColor(){this.CSSColor=h(a(this.color)),"rgba"==this.colorFormat?this.CSSColor=n(this.CSSColor):"hsla"==this.colorFormat&&(this.CSSColor=a(this.color)),this.DOM.scope&&this.DOM.scope.setAttribute("data-color-format",this.colorFormat),this.settings.onInput(this.CSSColor)},setColor(t){t&&(t=this.getHSLA(t),this.color=t,this.setCSSColor(),this.DOM.scope&&this.updateAllCSSVars(),this.DOM.value&&(this.DOM.value.value=this.CSSColor))},updateCSSVar(t,e){this.DOM.scope.style.setProperty(`--${t}`,e)},updateAllCSSVars(){const t=this.NamedHSLA(this.color);Object.entries(t).forEach((([t,e])=>{this.updateRangeSlider(t,e)}))},NamedHSLA:t=>({hue:t.h,saturation:t.s,lightness:t.l,alpha:t.a}),build(){const e=this.templates.scope.call(this);this.DOM.scope=t(e),this.DOM.value=this.DOM.scope.querySelector('input[name="value"]'),this.DOM.swatches=this.DOM.scope.querySelector(".color-picker__swatches")},init(){this.build(),this.setColor(this.color),this.bindEvents()}};export{i as CSStoHSLA,a as HSLAtoCSS,h as any_to_hex,c as changeColorFormat,x as default,n as hex_rgba,l as rgba_hsla};
//# sourceMappingURL=color-picker.es.js.map
